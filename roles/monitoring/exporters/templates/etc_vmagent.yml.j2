global:
  scrape_interval: 15s
  external_labels:
    instance: '{{ inventory_hostname }}'

scrape_configs:
  - job_name: exporter-exporter
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
  - job_name: apache
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: /proxy
    params:
      module:
        - apache
  - job_name: php-fpm
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: /proxy
    params:
      module:
        - php-fpm
  - job_name: node
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: /proxy
    params:
      module:
        - node
  - job_name: process
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: /proxy
    params:
      module:
        - process
  - job_name: postgres
    authorization:
      type: Bearer
      credentials: '{{ monitoring_exporters_auth_password }}'
    scrape_interval: 5s
    scrape_timeout: 5s
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: /proxy
    params:
      module:
        - postgres
